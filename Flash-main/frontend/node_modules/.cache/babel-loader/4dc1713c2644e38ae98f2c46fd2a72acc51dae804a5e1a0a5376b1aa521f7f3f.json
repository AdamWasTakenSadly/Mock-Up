{"ast":null,"code":"var _jsxFileName = \"D:\\\\Work\\\\Mock-Up\\\\Flash-main\\\\frontend\\\\src\\\\components\\\\ProductDetails\\\\ProductDetails.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport \"reactjs-popup/dist/index.css\";\nimport { useParams } from \"react-router-dom\";\n//import RatingsView from \"../RatingsView/RatingsView\";\nimport Card from \"@mui/material/Card\";\nimport CardActions from \"@mui/material/CardActions\";\nimport CardContent from \"@mui/material/CardContent\";\nimport CardMedia from \"@mui/material/CardMedia\";\nimport Typography from \"@mui/material/Typography\";\nimport Button from \"@mui/material/Button\";\nimport \"./productDetails.scss\";\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst displayStars = ratings => {\n  const starIcon = \"⭐\"; // You can replace this with an actual star icon if you have one\n  const fullStars = Math.floor(ratings);\n  const halfStars = ratings - fullStars >= 0.5 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStars;\n  const stars = Array(fullStars).fill(starIcon).concat(halfStars ? [`${starIcon}½`] : []).concat(Array(emptyStars).fill(\"☆\"));\n  return stars.join(\" \");\n};\nconst ProductDetails = _ref => {\n  _s();\n  let {\n    product\n  } = _ref;\n  const [error, setError] = useState(null);\n  const [isInitialRender, setIsInitialRender] = useState(true);\n  const [ratings, setRatings] = useState(null);\n  const params = useParams();\n  const id = params.id;\n  const fetchRatings = async () => {\n    // You can add code here to fetch ratings for the product (if needed)\n    // const response = await fetch('/products/' + product._id + '/ratings/guest');\n    // const json = await response.json();\n    // if (response.ok) {\n    //   setRatings(json);\n    // }\n  };\n  const addCart = async product => {\n    try {\n      console.log(product);\n      const response = await fetch(\"/products/buyProduct\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          id: product._id,\n          cart: product.name\n        }) // Adjust the body data as needed\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Product added to cart:\", data);\n        // Implement logic to update cart state or show success message\n      } else {\n        console.error(\"Failed to add product to cart:\", response.statusText);\n        // Implement logic to show error message\n      }\n    } catch (error) {\n      console.error(\"Error adding product to cart:\", error);\n      // Implement logic to show error message\n    }\n  };\n\n  useEffect(() => {\n    if (isInitialRender) {\n      setIsInitialRender(false);\n      fetchRatings();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ProductDetails\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"imgBox\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"image\",\n          src: product.image,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contentBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h7\",\n          className: \"ratings\",\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            color: \"#006DA3\"\n          },\n          children: displayStars(product.rating)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price\",\n          children: [product.price, \" EGP\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => addCart(product),\n          children: \"ADD TO CART\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductDetails, \"kKgDwKZKo2Mu5Hpo1GKIPOJbza4=\", false, function () {\n  return [useParams];\n});\n_c = ProductDetails;\nexport default ProductDetails;\nvar _c;\n$RefreshReg$(_c, \"ProductDetails\");","map":{"version":3,"names":["useEffect","useState","Popup","useParams","Card","CardActions","CardContent","CardMedia","Typography","Button","React","displayStars","ratings","starIcon","fullStars","Math","floor","halfStars","emptyStars","stars","Array","fill","concat","join","ProductDetails","product","error","setError","isInitialRender","setIsInitialRender","setRatings","params","id","fetchRatings","addCart","console","log","response","fetch","method","headers","body","JSON","stringify","_id","cart","name","ok","data","json","statusText","image","display","alignItems","justifyContent","color","rating","price"],"sources":["D:/Work/Mock-Up/Flash-main/frontend/src/components/ProductDetails/ProductDetails.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"reactjs-popup/dist/index.css\";\r\nimport { useParams } from \"react-router-dom\";\r\n//import RatingsView from \"../RatingsView/RatingsView\";\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport CardMedia from \"@mui/material/CardMedia\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Button from \"@mui/material/Button\";\r\nimport \"./productDetails.scss\";\r\n\r\nimport React from \"react\";\r\n\r\nconst displayStars = (ratings) => {\r\n  const starIcon = \"⭐\"; // You can replace this with an actual star icon if you have one\r\n  const fullStars = Math.floor(ratings);\r\n  const halfStars = ratings - fullStars >= 0.5 ? 1 : 0;\r\n  const emptyStars = 5 - fullStars - halfStars;\r\n  const stars = Array(fullStars)\r\n    .fill(starIcon)\r\n    .concat(halfStars ? [`${starIcon}½`] : [])\r\n    .concat(Array(emptyStars).fill(\"☆\"));\r\n  return stars.join(\" \");\r\n};\r\nconst ProductDetails = ({ product }) => {\r\n  const [error, setError] = useState(null);\r\n  const [isInitialRender, setIsInitialRender] = useState(true);\r\n  const [ratings, setRatings] = useState(null);\r\n\r\n  const params = useParams();\r\n  const id = params.id;\r\n\r\n  const fetchRatings = async () => {\r\n    // You can add code here to fetch ratings for the product (if needed)\r\n    // const response = await fetch('/products/' + product._id + '/ratings/guest');\r\n    // const json = await response.json();\r\n    // if (response.ok) {\r\n    //   setRatings(json);\r\n    // }\r\n  };\r\n\r\n  const addCart = async (product) => {\r\n    try {\r\n      console.log(product);\r\n      const response = await fetch(\"/products/buyProduct\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ id: product._id, cart: product.name }), // Adjust the body data as needed\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log(\"Product added to cart:\", data);\r\n        // Implement logic to update cart state or show success message\r\n      } else {\r\n        console.error(\"Failed to add product to cart:\", response.statusText);\r\n        // Implement logic to show error message\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error adding product to cart:\", error);\r\n      // Implement logic to show error message\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isInitialRender) {\r\n      setIsInitialRender(false);\r\n      fetchRatings();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"ProductDetails\">\r\n      {/* Card component created directly within the return statement */}\r\n      <div className=\"Card\">\r\n        {/* Your Card component JSX here, utilizing the product data */}\r\n        <div className=\"imgBox\">\r\n          <img className=\"image\" src={product.image} alt=\"\" />\r\n        </div>\r\n        <div className=\"contentBox\">\r\n          <h2>{product.name}</h2>\r\n          <Typography\r\n            variant=\"h7\"\r\n            className=\"ratings\"\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              color: \"#006DA3\",\r\n            }}\r\n          >\r\n            {displayStars(product.rating)}\r\n          </Typography>\r\n          <div className=\"price\">{product.price} EGP</div>\r\n          <button onClick={() => addCart(product)}>ADD TO CART</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}