{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { useQuery } from 'react-query';\nimport { useLocation } from 'react-router';\nimport { useRedirect } from '../routing';\nimport useAuthProvider from './useAuthProvider';\n/**\n * This hook calls the `authProvider.handleCallback()` method on mount. This is meant to be used in a route called\n * by an external authentication service (e.g. Auth0) after the user has logged in.\n * By default, it redirects to application home page upon success, or to the `redirectTo` location returned by `authProvider. handleCallback`.\n *\n * @returns An object containing { isLoading, data, error, refetch }.\n */\nexport var useHandleAuthCallback = function (options) {\n  var authProvider = useAuthProvider();\n  var redirect = useRedirect();\n  var location = useLocation();\n  var locationState = location.state;\n  var nextPathName = locationState && locationState.nextPathname;\n  var nextSearch = locationState && locationState.nextSearch;\n  var defaultRedirectUrl = nextPathName ? nextPathName + nextSearch : '/';\n  return useQuery(['auth', 'handleCallback'], function () {\n    return authProvider.handleCallback();\n  }, __assign({\n    retry: false,\n    onSuccess: function (data) {\n      var _a;\n      // AuthProviders relying on a third party services redirect back to the app can't\n      // use the location state to store the path on which the user was before the login.\n      // So we support a fallback on the localStorage.\n      var previousLocation = localStorage.getItem(PreviousLocationStorageKey);\n      var redirectTo = (_a = data === null || data === void 0 ? void 0 : data.redirectTo) !== null && _a !== void 0 ? _a : previousLocation;\n      if (redirectTo === false) {\n        return;\n      }\n      redirect(redirectTo !== null && redirectTo !== void 0 ? redirectTo : defaultRedirectUrl);\n    }\n  }, options));\n};\n/**\n * Key used to store the previous location in localStorage.\n * Used by the useHandleAuthCallback hook to redirect the user to their previous location after a successful login.\n */\nexport var PreviousLocationStorageKey = '@react-admin/nextPathname';","map":{"version":3,"mappings":";;;;;;;;;;AAAA,SAASA,QAAQ,QAAyB,aAAa;AACvD,SAASC,WAAW,QAAQ,cAAc;AAC1C,SAASC,WAAW,QAAQ,YAAY;AAExC,OAAOC,eAAe,MAAM,mBAAmB;AAE/C;;;;;;;AAOA,OAAO,IAAMC,qBAAqB,GAAG,UACjCC,OAAqE;EAErE,IAAMC,YAAY,GAAGH,eAAe,EAAE;EACtC,IAAMI,QAAQ,GAAGL,WAAW,EAAE;EAC9B,IAAMM,QAAQ,GAAGP,WAAW,EAAE;EAC9B,IAAMQ,aAAa,GAAGD,QAAQ,CAACE,KAAY;EAC3C,IAAMC,YAAY,GAAGF,aAAa,IAAIA,aAAa,CAACG,YAAY;EAChE,IAAMC,UAAU,GAAGJ,aAAa,IAAIA,aAAa,CAACI,UAAU;EAC5D,IAAMC,kBAAkB,GAAGH,YAAY,GAAGA,YAAY,GAAGE,UAAU,GAAG,GAAG;EAEzE,OAAOb,QAAQ,CACX,CAAC,MAAM,EAAE,gBAAgB,CAAC,EAC1B;IAAM,mBAAY,CAACe,cAAc,EAAE;EAA7B,CAA6B;IAE/BC,KAAK,EAAE,KAAK;IACZC,SAAS,EAAE,cAAI;;MACX;MACA;MACA;MACA,IAAMC,gBAAgB,GAAGC,YAAY,CAACC,OAAO,CACzCC,0BAA0B,CAC7B;MACD,IAAMC,UAAU,GACZ,MAACC,IAA2B,aAA3BA,IAAI,uBAAJA,IAAI,CAAyBD,UAAU,mCACxCJ,gBAAgB;MAEpB,IAAII,UAAU,KAAK,KAAK,EAAE;QACtB;;MAGJf,QAAQ,CAACe,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAIR,kBAAkB,CAAC;IAC9C;EAAC,GACET,OAAO,EAEjB;AACL,CAAC;AAED;;;;AAIA,OAAO,IAAMgB,0BAA0B,GAAG,2BAA2B","names":["useQuery","useLocation","useRedirect","useAuthProvider","useHandleAuthCallback","options","authProvider","redirect","location","locationState","state","nextPathName","nextPathname","nextSearch","defaultRedirectUrl","handleCallback","retry","onSuccess","previousLocation","localStorage","getItem","PreviousLocationStorageKey","redirectTo","data"],"sources":["D:\\Work\\Mock-Up\\Flash-main\\frontend\\node_modules\\react-admin\\node_modules\\ra-core\\src\\auth\\useHandleAuthCallback.ts"],"sourcesContent":["import { useQuery, UseQueryOptions } from 'react-query';\nimport { useLocation } from 'react-router';\nimport { useRedirect } from '../routing';\nimport { AuthProvider, AuthRedirectResult } from '../types';\nimport useAuthProvider from './useAuthProvider';\n\n/**\n * This hook calls the `authProvider.handleCallback()` method on mount. This is meant to be used in a route called\n * by an external authentication service (e.g. Auth0) after the user has logged in.\n * By default, it redirects to application home page upon success, or to the `redirectTo` location returned by `authProvider. handleCallback`.\n *\n * @returns An object containing { isLoading, data, error, refetch }.\n */\nexport const useHandleAuthCallback = (\n    options?: UseQueryOptions<ReturnType<AuthProvider['handleCallback']>>\n) => {\n    const authProvider = useAuthProvider();\n    const redirect = useRedirect();\n    const location = useLocation();\n    const locationState = location.state as any;\n    const nextPathName = locationState && locationState.nextPathname;\n    const nextSearch = locationState && locationState.nextSearch;\n    const defaultRedirectUrl = nextPathName ? nextPathName + nextSearch : '/';\n\n    return useQuery(\n        ['auth', 'handleCallback'],\n        () => authProvider.handleCallback(),\n        {\n            retry: false,\n            onSuccess: data => {\n                // AuthProviders relying on a third party services redirect back to the app can't\n                // use the location state to store the path on which the user was before the login.\n                // So we support a fallback on the localStorage.\n                const previousLocation = localStorage.getItem(\n                    PreviousLocationStorageKey\n                );\n                const redirectTo =\n                    (data as AuthRedirectResult)?.redirectTo ??\n                    previousLocation;\n\n                if (redirectTo === false) {\n                    return;\n                }\n\n                redirect(redirectTo ?? defaultRedirectUrl);\n            },\n            ...options,\n        }\n    );\n};\n\n/**\n * Key used to store the previous location in localStorage.\n * Used by the useHandleAuthCallback hook to redirect the user to their previous location after a successful login.\n */\nexport const PreviousLocationStorageKey = '@react-admin/nextPathname';\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}